<div class="col-lg-12">
    <div class="main-box">    
        <header class="main-box-header clearfix">
            <h3>Consultar/Editar chofer</h3>
        </header>
        <div class="main-box-body clearfix">
            <div class="row">
                <div class="alert alert-info">
                    <ul>
                        <li>En este módulo podrás consultar y editar los choferes del sistema.</li>
                        <li>Sí necesitas ayuda para usar este módulo haz clic en el botón <button class="btn btn-warning" type="button" onclick="javascript:introJs().start();"><i class="fa fa-question-circle"></i> AYUDA</button>.</li>
                    </ul>
                </div>
            </div>
            <form action="../controlador/control_chofer.php" method="POST" name="form_chofer" enctype="multipart/form-data">
                <input type="hidden" value="editar_chofer" name="operacion" id="cam_operacion"/>
                <input type="hidden" value="{idchofer}" name="idchofer" id="cam_idchofer"/>
                <div class="row">
                    <div class="form-group col-sm-6 col-lg-3">
                        <label for="exampleTooltip">Cédula/Rif <span class="badge badge-warning" data-toggle="tooltip" data-placement="rigth" title="Cédula/Rif del chofer"><i class="fa fa-question"></i></span></label>
                        <div class="input-group">
                            <div class="input-group-btn">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span id="inicial_rif"></span><span class="caret"></span></button>
                                <ul class="dropdown-menu" role="menu">
                                  <li class="rif_cho" data-value="V"><a href="#">V</a></li>
                                  <li class="rif_cho" data-value="E"><a href="#">E</a></li>
                                  <li class="rif_cho" data-value="J"><a href="#">J</a></li>
                                  <li class="rif_cho" data-value="N"><a href="#">N</a></li>
                                </ul>
                            </div><!-- /btn-group -->
                            <input type="text" class="form-control" data-step="1" data-intro='Ingrese la Cédula/Rif del chofer a registrar' data-position="bottom" name="cedula_rifcho" id="cam_cedula_rifcho" value="{inicial_rif}{cedula_rif}">
                        </div><!-- /input-group -->
                    </div>
                    <div class="form-group col-sm-6 col-lg-3">
                        <label for="exampleTooltip">Código <span class="badge badge-warning" data-toggle="tooltip" data-placement="rigth" title="Código del chofer"><i class="fa fa-question"></i></span></label>
                        <input type="text" class="form-control" data-step="2" data-intro='Ingrese el Código del chofer a registrar' data-position="bottom" name="idcodigocho" id="cam_idcodigocho" value="{idcodigocho}">
                    </div>
                    <div class="form-group col-sm-12 col-lg-6">
                        <label for="exampleTooltip">Alias <span class="badge badge-warning" data-toggle="tooltip" data-placement="rigth" title="Alias/apodo del chofer"><i class="fa fa-question"></i></span></label>
                        <input type="text" class="form-control" data-step="3" data-intro='Ingrese el alias/apodo del chofer a registrar' data-position="bottom" name="aliascho" id="cam_aliascho" value="{aliascho}">
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6">
                        <label for="exampleTooltip">Nombre <span class="badge badge-warning" data-toggle="tooltip" data-placement="rigth" title="Nombre del chofer"><i class="fa fa-question"></i></span></label>
                        <input type="text" class="form-control" data-step="4" data-intro='Ingrese el nombre del chofer a registrar' data-position="bottom" name="nombrecho" id="cam_nombrecho" value="{nombrecho}">
                    </div>
                    <div class="form-group col-xs-6">
                        <label for="exampleTooltip">Apellido <span class="badge badge-warning" data-toggle="tooltip" data-placement="rigth" title="Apellido del chofer"><i class="fa fa-question"></i></span></label>
                        <input type="text" class="form-control" data-step="5" data-intro='Ingrese el apellido del chofer a registrar' data-position="bottom" name="apellidocho" id="cam_apellidocho" value="{apellidocho}">
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6">
                        <label for="exampleTooltip">Fecha de nacimiento <span class="badge badge-warning" data-toggle="tooltip" data-placement="rigth" title="Nombre del chofer"><i class="fa fa-question"></i></span></label>
                        <div class="input-group">
                            <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                            <input type="date" class="form-control" data-step="6" data-intro='Ingrese el nombre del chofer a registrar' data-position="bottom"  name="fechanacimientocho" id="cam_fechanacimientocho"  value="{fechanacimientocho}">
                        </div>

                    </div>
                    <div class="form-group col-xs-6">
                        <label for="exampleTooltip">Dirección <span class="badge badge-warning" data-toggle="tooltip" data-placement="rigth" title="Dirección del chofer"><i class="fa fa-question"></i></span></label>
                        <textarea class="form-control" data-step="7" data-intro='Ingrese la dirección del chofer a registrar' data-position="bottom" name="direccioncho" id="cam_direccioncho" >{direccioncho}</textarea>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6">
                        <label for="exampleTooltip">Nº Teléfono movil <span class="badge badge-warning" data-toggle="tooltip" data-placement="rigth" title="Nº Teléfono del chofer"><i class="fa fa-question"></i></span></label>
                        <div class="input-group">
                            <span class="input-group-addon"><i class="fa fa-mobile-phone"></i></span>
                            <input type="text" class="form-control" data-step="8" data-intro='Ingrese el Nº Teléfono del chofer a registrar' data-position="bottom" name="telefonomovilcho" id="cam_telefonomovilcho" value="{telefonomovilcho}">
                        </div>
                    </div>
                    <div class="form-group col-xs-6">
                        <label for="exampleTooltip">Nº Teléfono Local <span class="badge badge-warning" data-toggle="tooltip" data-placement="rigth" title="Nº Teléfono Local del chofer"><i class="fa fa-question"></i></span></label>
                        <div class="input-group">
                            <span class="input-group-addon"><i class="fa fa-phone"></i></span>
                            <input type="text" class="form-control" data-step="9" data-intro='Ingrese el Nº Teléfono Local del chofer a registrar' data-position="bottom" name="telefonolocalcho" id="cam_telefonolocalcho" value="{telefonolocalcho}">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6">
                        <label for="exampleTooltip">Correo <span class="badge badge-warning" data-toggle="tooltip" data-placement="rigth" title="Correo del chofer"><i class="fa fa-question"></i></span></label>
                        <input type="text" class="form-control" data-step="10" data-intro='Ingrese el Correo del chofer a registrar' data-position="bottom" name="correocho" id="cam_correocho" value="{correocho}">
                    </div>
                    <div class="form-group col-xs-6">
                        <label for="exampleTooltip">Observación <span class="badge badge-warning" data-toggle="tooltip" data-placement="rigth" title="Dirección del chofer"><i class="fa fa-question"></i></span></label>
                        <textarea class="form-control" data-step="11" data-intro='Puede ingresar una Observación del chofer a registrar' data-position="bottom" name="observacioncho" id="cam_observacioncho" >{observacioncho}</textarea>
                    </div>
                </div>
                <div class="row table-responsive">
                    <h4><i class="fa fa-file-text-o"></i> Documentos</h4>

                    <table class="table table-hover col-lg-12">
                        <thead>
                            <th class="col-lg-3 col-sm-3 col-xs-3">Documento</th>
                            <th class="col-lg-2 col-sm-2 col-xs-2">Fecha Emisión</th>
                            <th class="col-lg-2 col-sm-2 col-xs-2">Fecha Vencimiento</th>
                            <th class="col-lg-4 col-sm-4 col-xs-4">Imagen</th>
                            <th class="col-lg-1 col-sm-1 col-xs-1"><button class="btn btn-success" type="button" data-step="14" data-intro='Agregar un documento' data-position="bottom" onclick="agregar_documento()"><i class="fa fa-plus"></i></button></th>
                        </thead>
                        <tbody id="filas">
                            <!--LISTADO_DOCUMENTOS_CHOFER-->
                            <tr>
                                <td class="col-lg-3 col-sm-3 col-xs-3">
                                    <select class="form-control" onchange="validar_vence(this)" name="iddocumento[]" id="cam_iddocumento0">
                                        <option value=""></option>
                                        <!--LISTADO_DOCUMENTOS{i}-->
                                            <option value="{iddocumento}" data-value="{vencedoc}" {selected}>{descripciondoc}</option>
                                        <!--LISTADO_DOCUMENTOS{i}-->
                                    </select>
                                </td>
                                <td class="col-lg-2 col-sm-2 col-xs-2">
                                    <div class="input-group">
                                        <input type="date" class="form-control" name="fechaemisiondoc[]" value="{fechaemisiondoc}" id="cam_fechaemisiondoc0">
                                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                    </div>
                                </td>
                                <td class="col-lg-2 col-sm-2 col-xs-2">
                                    <div class="input-group" id="fechavencimientodoc0">                                    
                                        <input type="date" class="form-control" value="{fechavencimientodoc}" name="fechavencimientodoc[]" id="cam_fechavencimientodoc0">
                                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                    </div>
                                    <p style="display:none" id="mensaje_fechavencimientodoc0">Este documento no vence.</p>
                                </td>
                                <td class="col-lg-4 col-sm-4 col-xs-4">
                                    <div class="input-group">                                    
                                        <span class="input-group-addon">                                    
                                        <img class="img ver-imagen" data-toggle="modal" href="#myModalImagen"  data-titulo="{nombrecho} {apellidocho} - {descripciondoc}" src="../media/img/documentos/{directoriodoc}">
                                        </span>
                                        <input type="hidden" name="directorio_o[]" id="cam_directorio_o{i}" value="{directoriodoc}">
                                        <input type="file" class="form-control" name="directoriodoc[]" id="cam_directoriodoc{i}">
                                    </div>
                                </td>
                                <td class="col-lg-1 col-sm-1 col-xs-1">
                                    <button class="btn btn-danger" type="button" data-step="4" data-intro='Quitar un documento' data-position="bottom" onclick="quitar_documento(this)"><i class="fa fa-minus"></i></button>
                                </td>
                            </tr>
                            <!--LISTADO_DOCUMENTOS_CHOFER-->
                        </tbody>
                    </table>
                    <input type="hidden" name="contador" id="cam_contador" value="0" />                    
                </div>
                <div class="row">
                    <div class="col-lg-offset-5 col-lg-10">
                        <button type="submit" data-step="12" data-intro='Para finalizar haga click en guardar para registrar el chofer.' data-position="top" class="btn btn-success"><i class="fa fa-check"></i> Guardar</button>
                        <a href="?modulo=chofer/chofer" data-step="13" data-intro='Para salir haga click en regresar para registrar el chofer.' data-position="top" class="btn btn-danger "><i class="fa fa-chevron-left"></i> Regresar</a>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<script>
$(document).ready(function(){
    $('#cam_fechanacimientocho').datepicker();
    $("#cam_telefonomovilcho").mask("9999 999-9999");
    $("#cam_telefonolocalcho").mask("9999 999-9999");
    $(".rif_cho").click(function(){
            var valor = $(this).attr("data-value");
            $("#inicial_rif").html(valor);
            $("#cam_cedula_rifcho").val(valor);
        });
});

function validar_vence(e)
{
    i=e.selectedIndex;
    vence=e.options[i].getAttribute('data-value');
    j=e.id.substring(e.id.length-1,e.id.length);
    if(vence=='1')
    {
        $("#fechavencimientodoc"+j).animate({ height: 'show', opacity: 'show' }, 'slow');
        $("#mensaje_fechavencimientodoc"+j).animate({ height: 'hide', opacity: 'hide' }, 'fast');

    }
    if(vence=='0')
    {
        $("#fechavencimientodoc"+j).animate({ height: 'hide', opacity: 'hide' }, 'fast');
        $("#mensaje_fechavencimientodoc"+j).animate({ height: 'show', opacity: 'show' }, 'slow');
        $("#cam_fechavencimientodoc"+j).val('');
    }

   

}

function agregar_documento()
{
    cam_contador=document.getElementById("cam_contador");
    contador=cam_contador.value;
    contador++;
      var url="../controlador/control_documento.php";

      var filas = document.getElementById('filas');
      var tr= document.createElement('tr');
      var col1= document.createElement('td');
      var select= document.createElement('select');
      select.setAttribute('class','form-control');
      select.setAttribute('name','iddocumento[]');
      select.setAttribute('id','cam_iddocumento'+contador);
      var col2= document.createElement('td');
      var col3= document.createElement('td');
      var col4= document.createElement('td');
      var col5= document.createElement('td');
      $.ajax({   
          type: "POST",
          url:url,
          data:{operacion:'consultar_documento'},
          success: function(datos){
              select.innerHTML=datos;   
           }
      });
      col2.innerHTML='<div class="input-group"><input type="date" class="form-control" name="fechaemisiondoc[]" id="cam_fechaemisiondoc'+contador+'"><span class="input-group-addon"><i class="fa fa-calendar"></i></span></div>';
      col3.innerHTML='<div class="input-group" id="'+contador+'"><input type="date" class="form-control" name="fechavencimientodoc[]" id="cam_fechaemisiondoc'+contador+'"><span class="input-group-addon"><i class="fa fa-calendar"></i></span></div><p style="display:none" id="mensaje_fechavencimientodoc'+contador+'">Este documento no vence.</p>';
      col4.innerHTML='<input type="file" class="form-control directoriodoc" name="directoriodoc[]" id="cam_directoriodoc'+contador+'">';
      col5.innerHTML='<button class="btn btn-danger" type="button" onclick="quitar_documento(this)"><i class="fa fa-minus"></i></button>';

      col1.appendChild(select);
      tr.appendChild(col1);
      tr.appendChild(col2);
      tr.appendChild(col3);
      tr.appendChild(col4);
      tr.appendChild(col5);
      filas.appendChild(tr);
      cam_contador.value=contador;

}
function quitar_documento(e)
{
    var filas = document.getElementById("filas");          
    var td = e.parentNode;
    var tr = td.parentNode;
    filas.removeChild(tr);
}


</script>
