<div class="col-lg-12">
    <div class="main-box">
        <header class="main-box-header clearfix">
            <h3>Asignación de módulos</h3>
        </header>
        <div class="main-box-body clearfix">
            <form action="../controlador/control_rol.php" method="POST" name="form_rol" id="form_rol">
                <input type="hidden" value="asignar_modulo" name="operacion" id="cam_operacion"/>
                <div class="row">
                    <div class="form-group form-group-select2 col-lg-3">
                        <label>Rol</label>
                        <select class="form-control" name="idrol" onchange="consultar_modulos(this.value)">
                            <option value="">Selecciona un rol</option>
                            <!--LISTADO_ROLES-->
                                <option value="{idrol}">{nombrerol}</option>
                            <!--LISTADO_ROLES-->
                        </select>
                    </div>
                </div>
                <div class="row" id="listado_modulos">
                       

                </div>
                <div class="row">
                    <div class="col-lg-offset-2 col-lg-10">
                        <button type="submit" class="btn btn-success"><i class="fa fa-check"></i> Guardar</button>
                        <a href="?modulo=seguridad/asignacion" class="btn btn-danger "><i class="fa fa-chevron-left"></i> Regresar</a>
                    </div>
                </div>
            </form>
        </div>

    </div>
</div>
<script>
    function consultar_modulos(id){
        if(id)
        {
          var url="?modulo=seguridad/consultar_modulos_rol";
          $.ajax({   
              type: "GET",
              url:url,
              data:{id:id},
              success: function(datos){
                  $('#listado_modulos').html(datos);   
               }
          });
        }
  }


function validar_orden()
{
    orden=document.getElementsByName('orden[]');
    for(i=0;i<orden.length;i++)
    {
        repetido=0;
        for(j=0;j<orden.length;j++)
        {
            if(orden[i].value==orden[j].value)
                repetido++;

            if(repetido==2)
            {
                return false;
            }
        }
    }
    return true;
}

function activar_orden(e)
{
    orden=document.getElementsByName('orden[]');
    idmodulo=document.getElementsByName('idmodulo[]');
    for(i=0;i<idmodulo.length;i++)
    {
        if(idmodulo[i].value==e.value && idmodulo[i].checked==true)
        {
            orden[i].disabled=false;
        }

        if(idmodulo[i].value==e.value && idmodulo[i].checked==false)
        {
            orden[i].disabled=true;
        }
    }
}
</script>